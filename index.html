<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Guild Boss Loot</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ===== Header ===== -->
<div style="display:flex; justify-content:center; align-items:center; margin-bottom:20px;">
    <h1>Guild Boss Loot</h1>
</div>

<!-- ===== Recorded Loot Entries Panel ===== -->
<div class="panel">
    <h2>Recorded Loot Entries</h2>
    <div id="loot-list"></div>
    <div class="summary-panel">
        <div><strong>Total Active Loot:</strong> <span id="total-active-loot">0</span></div>
        <div><strong>Active Share per Member:</strong> <span id="active-share-per-member">0</span></div>
    </div>
</div>

<!-- Floating Admin Button -->
<button id="admin-btn"
        style="position:fixed; bottom:20px; right:20px; padding:10px 15px; border-radius:50px;
               background-color:#4f46e5; color:#fff; border:none; cursor:pointer;
               box-shadow:0 3px 6px rgba(0,0,0,0.2);">
    Admin
</button>

<!-- Firebase Init -->
<script type="module" src="firebase-init.js"></script>

<!-- Viewer JS -->
<script type="module" src="view.js"></script>

<!-- Admin Button Script -->
<script type="module">
import { signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

// fixed admin email
const FIXED_ADMIN_EMAIL = "guild@celestial.com";

document.getElementById('admin-btn').addEventListener('click', async () => {
    const passphrase = prompt("Enter admin passphrase:");
    if (!passphrase) return;

    try {
        await signInWithEmailAndPassword(window.firebaseAuth, FIXED_ADMIN_EMAIL, passphrase);
        window.location.href = "admin.html";
    } catch (err) {
        console.error('Sign-in failed', err);
        alert("Incorrect passphrase or sign-in failed.");
    }
});
</script>
</body>
</html>